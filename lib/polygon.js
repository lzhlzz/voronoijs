var PolygonCenter,PolygonArea,PolygonIntersect;PolygonCenter=function(n){return n&&n.length?{x:n.reduce(function(n,e){return n+e.x},0)/n.length,y:n.reduce(function(n,e){return n+e.y},0)/n.length}:{x:0/0,y:0/0}},PolygonArea=function(n){var e,t,r,u;return function(){var o,l,y,g=[];for(o=0,l=n.length;l>o;++o)e=o,t=(e+1)%n.length,y=[n[e],n[t]],r=y[0],u=y[1],g.push(r.x*u.y-r.y*u.x);return g}().reduce(function(n,e){return n+e/2},0)},PolygonIntersect=function(n,e){function t(n,e){return n+e.x}function r(n,e){return n+e.y}function u(n){return n[0]>=0&&n[0]<=1}var o,l,y,g,h,c,f,i,x,s,d,a,P,p,v,A,C,I,J,N,O,S,w,b,j,k,m,q,z,B,D,E;for(o=!1,e=JSON.parse(JSON.stringify(e)),l=n.reduce(function(n,e){return n+e.x},0)/n.length,y=n.reduce(function(n,e){return n+e.y},0)/n.length,g=0,h=n.length;h>g;++g){for(c=g,f=n[c],i=n[(c+1)%n.length].x-n[c].x,x=n[(c+1)%n.length].y-n[c].y,s=e.reduce(t,0)/e.length,d=e.reduce(r,0)/e.length,P=[],p=0,v=e.length;v>p;++p)A=p,C=e[A],I=e[(A+1)%e.length].x-e[A].x,J=e[(A+1)%e.length].y-e[A].y,J*i-I*x===0?P.push([-1,A]):(N=((C.x-f.x)*x-(C.y-f.y)*i)/(J*i-I*x),O=[C.x+I*N,C.y+J*N],S=O[0],w=O[1],O=[i,x],b=O[0],j=O[1],O=[s-S,d-w],k=O[0],m=O[1],q=(-b*J+j*I)*(-k*J+m*I)>0,P.push([N,A,S,w,q]));if(a=P,a=a.filter(u),a.length<2){if((-(l-f.x)*x+(y-f.y)*i)*(-(s-f.x)*x+(d-f.y)*i)<0)return[]}else{O=a[0][4]?[a[0],a[1]]:[a[1],a[0]],z=O[0],B=O[1],D=[{x:z[2],y:z[3]},{x:B[2],y:B[3]}],E=B[1];do E=(E+1)%e.length,D.push(e[E]);while(E!==z[1]);e=D}}return e};