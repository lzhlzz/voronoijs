var Polygon;Voronoi.Polygon=Polygon={},Polygon.center=function(n){return n&&n.length?{x:n.reduce(function(n,e){return n+e.x},0)/n.length,y:n.reduce(function(n,e){return n+e.y},0)/n.length}:{x:0/0,y:0/0}},Polygon.area=function(n){var e,r,t,u;return function(){var o,l,y,g=[];for(o=0,l=n.length;l>o;++o)e=o,r=(e+1)%n.length,y=[n[e],n[r]],t=y[0],u=y[1],g.push(t.x*u.y-t.y*u.x);return g}().reduce(function(n,e){return n+e/2},0)},Polygon.intersect=function(n,e){function r(n,e){return n+e.x}function t(n,e){return n+e.y}function u(n){return n[0]>=0&&n[0]<=1}var o,l,y,g,h,c,i,f,x,d,s,a,P,p,v,J,N,O,S,w,V,b,j,k,m,q,z,A,B,C,D,E;for(o=!1,e=JSON.parse(JSON.stringify(e)),l=n.reduce(function(n,e){return n+e.x},0)/n.length,y=n.reduce(function(n,e){return n+e.y},0)/n.length,g=0,h=n.length;h>g;++g){for(c=g,i=n[c],f=n[(c+1)%n.length].x-n[c].x,x=n[(c+1)%n.length].y-n[c].y,d=e.reduce(r,0)/e.length,s=e.reduce(t,0)/e.length,P=[],p=0,v=e.length;v>p;++p)J=p,N=e[J],O=e[(J+1)%e.length].x-e[J].x,S=e[(J+1)%e.length].y-e[J].y,S*f-O*x===0?P.push([-1,J]):(w=((N.x-i.x)*x-(N.y-i.y)*f)/(S*f-O*x),V=[N.x+O*w,N.y+S*w],b=V[0],j=V[1],V=[f,x],k=V[0],m=V[1],V=[d-b,s-j],q=V[0],z=V[1],A=(-k*S+m*O)*(-q*S+z*O)>0,P.push([w,J,b,j,A]));if(a=P,a=a.filter(u),a.length<2){if((-(l-i.x)*x+(y-i.y)*f)*(-(d-i.x)*x+(s-i.y)*f)<0)return[]}else{V=a[0][4]?[a[0],a[1]]:[a[1],a[0]],B=V[0],C=V[1],D=[{x:B[2],y:B[3]},{x:C[2],y:C[3]}],E=C[1];do E=(E+1)%e.length,D.push(e[E]);while(E!==B[1]);e=D}}return e};