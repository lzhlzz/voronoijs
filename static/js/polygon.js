var Polygon;Voronoi.Polygon=Polygon={},Polygon.center=function(n){return n&&n.length?{x:n.reduce(function(n,e){return n+e.x},0)/n.length,y:n.reduce(function(n,e){return n+e.y},0)/n.length}:{x:0/0,y:0/0}},Polygon.area=function(n){var e,r,t,u;return function(){var o,y,l,g=[];for(o=0,y=n.length;y>o;++o)e=o,r=(e+1)%n.length,l=[n[e],n[r]],t=l[0],u=l[1],g.push(t.x*u.y-t.y*u.x);return g}().reduce(function(n,e){return n+e/2},0)},Polygon.intersect=function(n,e){function r(n,e){return n+e.x}function t(n,e){return n+e.y}var u,o,y,l,g,c,h,x,f,i,d,a,P,s,v,p,w,V,b,j,k,m,q,z,A,B,C,D,E,F,G,H,I;for(u=!1,o=n.reduce(function(n,e){return n+e.x},0)/n.length,y=n.reduce(function(n,e){return n+e.y},0)/n.length,l=0,g=n.length;g>l;++l){for(c=l,h=[n[c],n[(c+1)%n.length]],x=h[0],f=h[1],h=[f.x-x.x,f.y-x.y],i=h[0],d=h[1],a=e.reduce(r,0)/e.length,P=e.reduce(t,0)/e.length,s=x.x*d-x.y*i,p=[],w=0,V=e.length;V>w;++w)b=w,h=[e[b],e[(b+1)%e.length]],j=h[0],k=h[1],h=[k.x-j.x,k.y-j.y],m=h[0],q=h[1],q*i-m*d!==0&&(z=(j.x*d-j.y*i-s)/(q*i-m*d),0>z||z>1||(h=[j.x+m*z,j.y+q*z],A=h[0],B=h[1],h=[a-A,P-B],C=h[0],D=h[1],E=(-i*q+d*m)*(-C*q+D*m)>0,p.push([z,b,A,B,E])));if(v=p,v.length<2){if((-(o-x.x)*d+(y-x.y)*i)*(-(a-x.x)*d+(P-x.y)*i)<0)return[]}else{h=v[0][4]?[v[0],v[1]]:[v[1],v[0]],F=h[0],G=h[1],H=[{x:F[2],y:F[3]},{x:G[2],y:G[3]}],I=G[1];do I=(I+1)%e.length,H.push(e[I]);while(I!==F[1]);e=H}}return e};